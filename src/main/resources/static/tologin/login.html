<!--<!DOCTYPE html>-->
<!--<html lang="zh-CN">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>登录页面</title>-->
<!--    <link rel="stylesheet" href="style.css">-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h2>用户登录</h2>-->
<!--        <form id="loginForm">-->
<!--            <label for="account">账号</label>-->
<!--            <input type="text" id="account" name="account" placeholder="请输入账号">-->
<!--            -->
<!--            <label for="password">密码</label>-->
<!--            <input type="password" id="password" name="password" placeholder="请输入密码">-->
<!--            -->
<!--            <button type="button"  class="btn">登录</button>-->
<!--            <p>没有账号？<a href="register-phone.html">去注册</a></p>-->
<!--            <p><a href="forgot-password.html">忘记密码？</a></p>-->
<!--            <p><a href="phone-login.html">手机号登录</a></p>-->
<!--        </form>-->
<!--    </div>-->

<!--    <script src="login.js"></script>-->
<!--</body>-->
<!--</html>-->
<!--<script src="../js/axios.min.js"></script>-->
<!--<script>-->
<!--    let btn = document.querySelector(".btn");-->
<!--    btn.onclick = function () {-->
<!--        // 获取账号和密码的值-->
<!--        let username = document.querySelector("#account").value;-->
<!--        let password = document.querySelector("#password").value;-->

<!--        // 检查输入-->
<!--        if (!username || !password) {-->
<!--            alert("请输入账号和密码！");-->
<!--            return;-->
<!--        }-->

<!--        // 发送请求到服务器-->
<!--        axios({-->
<!--            url: "http://localhost:8080/tAdmin/login",-->
<!--            method: "post",-->
<!--            data: {-->
<!--                username: username,-->
<!--                password: password,-->
<!--            }-->
<!--        }).then((result) => {-->
<!--            if (result.data.code == 200) {-->
<!--                // 登录成功，跳转到首页-->
<!--                location.href = "/user/index.html";-->
<!--            } else {-->
<!--                // 登录失败，弹出提示-->
<!--                alert("用户名或密码错误,请重新输入");-->
<!--            }-->
<!--        }).catch(function (error) {-->
<!--            // 处理请求错误-->
<!--            alert('登录异常，请联系管理员' + error);-->
<!--        });-->
<!--    }-->
<!--</script>-->



<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>账号登录</title>
    <link rel="stylesheet" href="style.css">
    <script src="../js/axios.min.js"></script>
</head>
<body>
<div class="container">
    <h2>账号登录</h2>
    <form id="loginForm">
        <label for="username">用户名</label>
        <input type="text" id="username" name="username" placeholder="请输入用户名">

        <label for="password">密码</label>
        <input type="password" id="password" name="password" placeholder="请输入密码">

        <button type="button" class="btn" onclick="login()">登录</button>
        <p>没有账号？<a href="register-phone.html">去注册</a></p>
        <p><a href="phone-login.html">手机号登录</a></p>
    </form>
</div>

<script>
    function login() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        // 表单验证
        if (!username || !password) {
            alert('请填写完整信息');
            return;
        }

        // 发送登录请求
        axios.post('/tAdmin/login', {
            username: username,
            password: password
        })
            .then(response => {
                if (response.data.code === 200) {
                    // 根据返回的身份进行跳转
                    if (response.data.data === 0) {
                        // 管理员
                        window.location.href = '/admin/admin.html';
                    } else {
                        // 普通用户
                        window.location.href = '/user/index.html';
                    }
                } else {
                    alert(response.data.msg);
                }
            })
            .catch(error => {
                console.error('登录失败:', error);
                alert('登录失败，请稍后重试');
            });
    }
</script>
</body>
</html>
